const translations = {
    en: {
        "page.home_title": "SleepOS - Homepage",
        "page.devices_title": "Devices - SleepOS",
        "page.team_title": "Our Team - SleepOS",
        "nav.features": "Features",
        "nav.devices": "Devices",
        "nav.team": "Team",
        "hero.title": "The OS That Puts You at <span>Ease</span>",
        "hero.description": "SleepOS is designed to deliver a clean, smooth, and distraction-free Android experience.",
        "hero.cta": "Download Now",
        "features.title": "Why Choose <span>SleepOS</span>?",
        "features.subtitle": "SleepOS is an AOSP-based ROM, focused on delivering a clean, smooth, and stable experience with carefully selected features for better performance and battery life.",
        "feature1.title": "Optimal Performance",
        "feature1.description": "Designed for speed and efficiency, ensuring a smooth, lag-free experience.",
        "feature2.title": "Clean Interface",
        "feature2.description": "Enjoy a minimalist and intuitive UI, free from unnecessary bloatware.",
        "feature3.title": "Leading Privacy",
        "feature3.description": "Full control over your data with enhanced and transparent privacy features.",
        "feature4.title": "Battery Efficiency",
        "feature4.description": "Smart optimizations to extend your device's battery life.",
        "feature5.title": "Flexible Customization",
        "feature5.description": "Customize the look and feel of the OS to your liking with various options.",
        "feature6.title": "Regular Updates",
        "feature6.description": "Get the latest security and feature updates regularly.",
        "news.title": "Latest News & Updates",
        "news.subtitle": "Follow the latest developments from the SleepOS Project.",
        "news1.title": "SleepOS v1.0 \"Lullaby\" Released!",
        "news1.description": "We are proud to announce the first stable release of SleepOS, focusing on stability and performance.",
        "news1.image_alt": "SleepOS Update News Image",
        "news2.title": "New Device Support Added",
        "news2.description": "Support for POCO F6, Xiaomi 13, and OnePlus 11 is now available on our devices page.",
        "news2.image_alt": "New Devices News Image",
        "news3.title": "Join the SleepOS Community",
        "news3.description": "We invite you to join our community on Telegram and Forums.",
        "news3.image_alt": "Community News Image",
        "news.read_more": "Read More &rarr;",
        "footer.copyright": "&copy; 2025 SleepOS Project.",
        "devices.title": "Download <span>SleepOS</span> for Your Device",
        "devices.subtitle": "Find your device from the list below to get the latest build.",
        "devices.search_placeholder": "Search device (e.g., POCO F6, peridot)...",
        "devices.download_button": "Download",
        "device.poco_f6_alt": "POCO F6 Image",
        "device.poco_f5_alt": "POCO F5 Image",
        "team.title": "The Core <span>SleepOS</span> Team",
        "team.subtitle": "The people behind this project who make SleepOS a reality.",
        "team.role.lead_dev": "Lead Developer & Founder",
        "team.role.ui_ux": "UI/UX Designer",
        "team.role.maintainer": "Core Maintainer",
        "team.role.community": "Community Manager",
        "team.role.docs": "Documentation Lead",
        "team.join_us": "Interested in joining? <a href=\"#\" style=\"color: var(--light-blue); text-decoration: none;\">Contact us!</a>",
        "team.member1_alt": "Team Member Aditya Dwi",
        "team.member2_alt": "Team Member Jane Doe",
        "team.member3_alt": "Team Member Satoshi Nakamoto",
        "team.member4_alt": "Team Member Alice Wonderland",
        "team.member5_alt": "Team Member Bob Builder"
    },
    id: {
        "page.home_title": "SleepOS - Beranda",
        "page.devices_title": "Perangkat - SleepOS",
        "page.team_title": "Tim Kami - SleepOS",
        "nav.features": "Fitur",
        "nav.devices": "Perangkat",
        "nav.team": "Tim",
        "hero.title": "OS yang Membuat Anda <span>Nyaman</span>",
        "hero.description": "SleepOS dirancang untuk memberikan pengalaman Android yang bersih, mulus, dan bebas gangguan.",
        "hero.cta": "Unduh Sekarang",
        "features.title": "Mengapa Memilih <span>SleepOS</span>?",
        "features.subtitle": "SleepOS adalah ROM berbasis AOSP, berfokus pada pengalaman yang bersih, mulus, dan stabil dengan fitur-fitur pilihan untuk performa dan daya tahan baterai yang lebih baik.",
        "feature1.title": "Performa Optimal",
        "feature1.description": "Didesain untuk kecepatan dan efisiensi, memastikan pengalaman yang mulus tanpa lag.",
        "feature2.title": "Antarmuka Bersih",
        "feature2.description": "Nikmati UI yang minimalis dan intuitif, bebas dari bloatware yang tidak perlu.",
        "feature3.title": "Privasi Terdepan",
        "feature3.description": "Kontrol penuh atas data Anda dengan fitur privasi yang ditingkatkan dan transparan.",
        "feature4.title": "Efisiensi Baterai",
        "feature4.description": "Optimalisasi cerdas untuk memperpanjang masa pakai baterai perangkat Anda.",
        "feature5.title": "Kustomisasi Fleksibel",
        "feature5.description": "Sesuaikan tampilan dan nuansa OS sesuai keinginan Anda dengan berbagai opsi.",
        "feature6.title": "Pembaruan Teratur",
        "feature6.description": "Dapatkan pembaruan keamanan dan fitur terbaru secara berkala.",
        "news.title": "Berita & Pembaruan Terbaru",
        "news.subtitle": "Ikuti perkembangan terbaru dari Proyek SleepOS.",
        "news1.title": "SleepOS v1.0 \"Lullaby\" Dirilis!",
        "news1.description": "Kami dengan bangga mengumumkan rilis stabil pertama SleepOS, dengan fokus pada stabilitas dan performa.",
        "news1.image_alt": "Gambar Berita Pembaruan SleepOS",
        "news2.title": "Dukungan Perangkat Baru Ditambahkan",
        "news2.description": "Dukungan untuk POCO F6, Xiaomi 13, dan OnePlus 11 kini tersedia di halaman perangkat kami.",
        "news2.image_alt": "Gambar Berita Perangkat Baru",
        "news3.title": "Bergabunglah dengan Komunitas SleepOS",
        "news3.description": "Kami mengundang Anda untuk bergabung dengan komunitas kami di Telegram dan Forum.",
        "news3.image_alt": "Gambar Berita Komunitas",
        "news.read_more": "Baca Selengkapnya &rarr;",
        "footer.copyright": "&copy; 2025 Proyek SleepOS.",
        "devices.title": "Unduh <span>SleepOS</span> untuk Perangkat Anda",
        "devices.subtitle": "Temukan perangkat Anda dari daftar di bawah ini untuk mendapatkan build terbaru.",
        "devices.search_placeholder": "Cari perangkat (mis. POCO F6, peridot)...",
        "devices.download_button": "Unduh",
        "device.poco_f6_alt": "Gambar POCO F6",
        "device.poco_f5_alt": "Gambar POCO F5",
        "team.title": "Tim Inti <span>SleepOS</span>",
        "team.subtitle": "Orang-orang di balik proyek ini yang mewujudkan SleepOS.",
        "team.role.lead_dev": "Pengembang Utama & Pendiri",
        "team.role.ui_ux": "Desainer UI/UX",
        "team.role.maintainer": "Maintainer Inti",
        "team.role.community": "Manajer Komunitas",
        "team.role.docs": "Pemimpin Dokumentasi",
        "team.join_us": "Tertarik untuk bergabung? <a href=\"#\" style=\"color: var(--light-blue); text-decoration: none;\">Hubungi kami!</a>",
        "team.member1_alt": "Anggota Tim Aditya Dwi",
        "team.member2_alt": "Anggota Tim Jane Doe",
        "team.member3_alt": "Anggota Tim Satoshi Nakamoto",
        "team.member4_alt": "Anggota Tim Alice Wonderland",
        "team.member5_alt": "Anggota Tim Bob Builder"
    },
    de: { // German translations (placeholder)
        "page.home_title": "SleepOS - Startseite",
        "nav.features": "Funktionen",
        "nav.devices": "Geräte",
        "nav.team": "Team",
        "hero.title": "Das Betriebssystem, das Sie <span>beruhigt</span>",
        "hero.description": "SleepOS wurde entwickelt, um ein sauberes, reibungsloses und ablenkungsfreies Android-Erlebnis zu bieten.",
        "hero.cta": "Jetzt herunterladen",
        "features.title": "Warum <span>SleepOS</span> wählen?",
        "features.subtitle": "SleepOS ist ein AOSP-basiertes ROM, das sich auf ein sauberes, reibungsloses und stabiles Erlebnis mit sorgfältig ausgewählten Funktionen für bessere Leistung und Akkulaufzeit konzentriert.",
        "footer.copyright": "&copy; 2025 SleepOS Projekt."
    },
    es: { // Spanish translations (placeholder)
        "page.home_title": "SleepOS - Página de inicio",
        "nav.features": "Características",
        "nav.devices": "Dispositivos",
        "nav.team": "Equipo",
        "hero.title": "El SO que te da <span>tranquilidad</span>",
        "hero.description": "SleepOS está diseñado para ofrecer una experiencia Android limpia, fluida y sin distracciones.",
        "hero.cta": "Descargar ahora",
        "features.title": "¿Por qué elegir <span>SleepOS</span>?",
        "features.subtitle": "SleepOS es una ROM basada en AOSP, enfocada en ofrecer una experiencia limpia, fluida y estable con características cuidadosamente seleccionadas para un mejor rendimiento y duración de la batería.",
        "footer.copyright": "&copy; 2025 Proyecto SleepOS."
    },
    fr: { // French translations (placeholder)
        "page.home_title": "SleepOS - Page d'accueil",
        "nav.features": "Fonctionnalités",
        "nav.devices": "Appareils",
        "nav.team": "Équipe",
        "hero.title": "L'OS qui vous met à <span>l'aise</span>",
        "hero.description": "SleepOS est conçu pour offrir une expérience Android propre, fluide et sans distraction.",
        "hero.cta": "Télécharger maintenant",
        "features.title": "Pourquoi choisir <span>SleepOS</span>?",
        "features.subtitle": "SleepOS est une ROM basée sur AOSP, axée sur une expérience propre, fluide et stable avec des fonctionnalités soigneusement sélectionnées pour de meilleures performances et une meilleure autonomie de la batterie.",
        "footer.copyright": "&copy; 2025 Projet SleepOS."
    },
    hi: { // Hindi translations (placeholder)
        "page.home_title": "SleepOS - होमपेज",
        "nav.features": "विशेषताएँ",
        "nav.devices": "डिवाइस",
        "nav.team": "टीम",
        "hero.title": "वह OS जो आपको <span>आराम</span> देता है",
        "hero.description": "SleepOS को एक स्वच्छ, सहज और व्याकुलता-मुक्त Android अनुभव प्रदान करने के लिए डिज़ाइन किया गया है।",
        "hero.cta": "अभी डाउनलोड करें",
        "features.title": "<span>SleepOS</span> क्यों चुनें?",
        "features.subtitle": "SleepOS एक AOSP-आधारित ROM है, जो बेहतर प्रदर्शन और बैटरी जीवन के लिए सावधानीपूर्वक चुनी गई सुविधाओं के साथ एक स्वच्छ, सहज और स्थिर अनुभव प्रदान करने पर केंद्रित है।",
        "footer.copyright": "&copy; 2025 स्लीपओएस प्रोजेक्ट।"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // --- Hamburger Menu Toggle ---
    const hamburger = document.querySelector('.hamburger');
    const navMenu = document.querySelector('.nav-menu');
    const navLinks = document.querySelectorAll('.nav-links li a');

    if (hamburger && navMenu) {
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navMenu.classList.toggle('active');
        });
    }

    if (navLinks) {
        navLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (hamburger && navMenu) {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                }
            });
        });
    }

    // --- New Language Dropdown Logic ---
    const langToggleButton = document.getElementById('language-toggle-btn');
    const langMenu = document.getElementById('language-menu');
    const currentLangFlag = document.getElementById('current-lang-flag');
    const currentLangText = document.getElementById('current-lang-text');

    function setLanguage(lang) {
        const currentTranslations = translations[lang];
        if (!currentTranslations) return;

        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (currentTranslations[key] !== undefined) {
                element.innerHTML = currentTranslations[key];
            }
        });

        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            if (currentTranslations[key] !== undefined) {
                element.setAttribute('placeholder', currentTranslations[key]);
            }
        });

        document.querySelectorAll('[data-i18n-alt]').forEach(element => {
            const key = element.getAttribute('data-i18n-alt');
            if (currentTranslations[key] !== undefined) {
                element.setAttribute('alt', currentTranslations[key]);
            }
        });

        const titleElement = document.querySelector('title');
        if (titleElement && titleElement.hasAttribute('data-i18n')) {
            const titleKey = titleElement.getAttribute('data-i18n');
            if (currentTranslations[titleKey] !== undefined) {
                document.title = currentTranslations[titleKey];
            }
        }
        localStorage.setItem('selectedLanguage', lang);

        // Update the dropdown toggle button
        if (currentLangFlag && currentLangText) {
            if (lang === 'id') {
                currentLangFlag.src = 'https://flagcdn.com/w20/id.png';
                currentLangFlag.alt = 'Indonesian Flag';
                currentLangText.textContent = 'ID';
            } else if (lang === 'de') {
                currentLangFlag.src = 'https://flagcdn.com/w20/de.png';
                currentLangFlag.alt = 'German Flag';
                currentLangText.textContent = 'DE';
            } else if (lang === 'es') {
                currentLangFlag.src = 'https://flagcdn.com/w20/es.png';
                currentLangFlag.alt = 'Spanish Flag';
                currentLangText.textContent = 'ES';
            } else if (lang === 'fr') {
                currentLangFlag.src = 'https://flagcdn.com/w20/fr.png';
                currentLangFlag.alt = 'French Flag';
                currentLangText.textContent = 'FR';
            } else if (lang === 'hi') {
                currentLangFlag.src = 'https://flagcdn.com/w20/in.png';
                currentLangFlag.alt = 'Hindi Flag';
                currentLangText.textContent = 'HI';
            } else {
                currentLangFlag.src = 'https://flagcdn.com/w20/us.png';
                currentLangFlag.alt = 'English Flag';
                currentLangText.textContent = 'EN';
            }
        }
    }

    if (langToggleButton && langMenu) {
        const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
        setLanguage(savedLanguage);

        langToggleButton.addEventListener('click', (e) => {
            e.stopPropagation(); // Mencegah event 'click' menyebar ke 'document'
            langMenu.classList.toggle('show');
        });

        langMenu.addEventListener('click', (e) => {
            e.preventDefault();
            const target = e.target.closest('a');
            if (target && target.dataset.lang) {
                setLanguage(target.dataset.lang);
                langMenu.classList.remove('show');
            }
        });

        // Menutup dropdown jika pengguna mengklik di luar area dropdown
        document.addEventListener('click', () => {
            if (langMenu.classList.contains('show')) {
                langMenu.classList.remove('show');
            }
        });
    }

    // --- Active Nav Link Highlighting ---
    const currentPath = window.location.pathname.split('/').pop();
    if (navLinks) {
        navLinks.forEach(link => {
            const linkPath = link.getAttribute('href').split('/').pop().split('#')[0];
            const isActive = (currentPath === linkPath) || (currentPath === '' && linkPath === 'index.html');
            if (isActive) {
                link.classList.add('active');
            }
        });
    }

    // --- Scroll Reveal Animation ---
    const scrollRevealElements = document.querySelectorAll('.scroll-reveal');
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, { threshold: 0.1 });
    scrollRevealElements.forEach(el => observer.observe(el));

    // --- Device Search/Filter (for perangkat.html) ---
    const deviceSearchInput = document.getElementById('deviceSearch');
    if (deviceSearchInput) {
        deviceSearchInput.addEventListener('keyup', (event) => {
            const searchTerm = event.target.value.toLowerCase();
            const deviceCards = document.querySelectorAll('.device-card');
            deviceCards.forEach(card => {
                const deviceName = card.querySelector('h2').textContent.toLowerCase();
                const codename = card.querySelector('.codename').textContent.toLowerCase();
                card.style.display = (deviceName.includes(searchTerm) || codename.includes(searchTerm)) ? 'block' : 'none';
            });
        });
    }
});